{"version":3,"sources":["webpack:///./template/photo-card.hbs","webpack:///./js/apiService.js","webpack:///./index.js"],"names":["Handlebars","module","exports","template","container","depth0","helpers","partials","data","alias1","lambda","alias2","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","stack1","nullContext","program","noop","apiService","this","searchQuery","page","fetchImages","fetch","BASE_URL","then","resp","json","hits","incrementPage","resetPage","newQuery","refs","searchForm","document","querySelector","infoMessage","galleryContainer","loadMoreBtn","appendImagesMarkUp","cards","insertAdjacentHTML","cardTpl","clearImagesGallery","innerHTML","onInfoMessage","text","textContent","hideLoadMoreBtn","classList","add","addEventListener","e","preventDefault","query","target","elements","value","length","remove","position","stepScroll","pageYOffset","clientY","window","scrollTo","top","behavior"],"mappings":"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","file":"main.48fb76be63d1a9b55a56.js","sourcesContent":["var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var alias1=container.lambda, alias2=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<li class=\\\"item\\\">\\r\\n  <div class=\\\"photo-card\\\">\\r\\n    <img class=\\\"photo-card-img\\\" src=\\\"\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"webformatURL\") : depth0), depth0))\n    + \"\\\" alt=\\\"\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"tags\") : depth0), depth0))\n    + \"\\\" />\\r\\n    <div class=\\\"stats\\\">\\r\\n      <p class=\\\"stats-item\\\">\\r\\n        <i class=\\\"material-icons\\\">thumb_up</i>\\r\\n        \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"likes\") : depth0), depth0))\n    + \"\\r\\n      </p>\\r\\n      <p class=\\\"stats-item\\\">\\r\\n        <i class=\\\"material-icons\\\">visibility</i>\\r\\n        \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"views\") : depth0), depth0))\n    + \"\\r\\n      </p>\\r\\n      <p class=\\\"stats-item\\\">\\r\\n        <i class=\\\"material-icons\\\">comment</i>\\r\\n        \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"comments\") : depth0), depth0))\n    + \"\\r\\n      </p>\\r\\n      <p class=\\\"stats-item\\\">\\r\\n        <i class=\\\"material-icons\\\">cloud_download</i>\\r\\n        \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"downloads\") : depth0), depth0))\n    + \"\\r\\n      </p>\\r\\n    </div>\\r\\n  </div>\\r\\n</li>\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":25,\"column\":9}}})) != null ? stack1 : \"\");\n},\"useData\":true});","const BASE_URL = 'https://pixabay.com/api';\r\nconst API_KEY = '19030370-3b0ac62398e7506ebf605c4ab'\r\n\r\n\r\nexport default class ApiService {\r\n    constructor() {\r\n        this.searchQuery = '';\r\n        this.page = 1;\r\n}\r\n\r\n    fetchImages() {\r\n    \r\n        return fetch(`${BASE_URL}/?image_type=photo&orientation=horizontal&q=${this.searchQuery}&page=${this.page}&per_page=12&key=${API_KEY}`)\r\n        .then(resp => resp.json())\r\n            .then(({hits}) => {\r\n                this.incrementPage();\r\n                return hits;\r\n            });\r\n    };\r\n\r\n    incrementPage() {\r\n        this.page += 1;\r\n    }\r\n    resetPage() {\r\n        this.page = 1;\r\n    }\r\n\r\n    get query() {\r\n      return this.searchQuery\r\n    };\r\n\r\n    set query(newQuery) {\r\n        this.searchQuery = newQuery;\r\n    }\r\n}","import './styles.css';\r\nimport cardTpl from './template/photo-card.hbs';\r\nimport ApiServise from './js/apiService';\r\n\r\nconst apiService = new ApiServise;\r\n\r\nconst refs = {\r\n    searchForm: document.querySelector('#search-form'),\r\n    infoMessage:document.querySelector('.search-form-message'),\r\n    galleryContainer: document.querySelector('.gallery'),\r\n    loadMoreBtn: document.querySelector('.js-btn-more'),\r\n}\r\n\r\nrefs.searchForm.addEventListener('submit', onSearch);\r\nrefs.loadMoreBtn.addEventListener('click', onLoadMore);\r\n\r\nfunction onSearch(e) {\r\n    e.preventDefault();\r\n    apiService.query = e.target.elements.query.value;\r\n    apiService.resetPage();\r\n    onInfoMessage('');\r\n    hideLoadMoreBtn();\r\n    \r\n    if (apiService.query === '') {    // проверка на пустой запрос\r\n        clearImagesGallery();\r\n        onInfoMessage('Enter value for search');  \r\n        return\r\n    }\r\n\r\n    apiService.fetchImages().then(cards => {\r\n        clearImagesGallery();\r\n\r\n        if (cards.length === 0) {    // проверка на неверный запрос\r\n            hideLoadMoreBtn();\r\n            onInfoMessage('Not found results, please change your search query');\r\n            return\r\n        }\r\n\r\n        appendImagesMarkUp(cards);\r\n\r\n        if (cards.length === 12) {   //проверка на наличие картинок для след загрузки\r\n            visibleLoadMoreBtn()\r\n        }\r\n    });\r\n}\r\n\r\nfunction onLoadMore(e) {\r\n    apiService.fetchImages().then(cards => {\r\n        const stepScroll = pageYOffset+e.clientY-30;\r\n        appendImagesMarkUp(cards)\r\n        onScrollToScreen(stepScroll);\r\n\r\n        if (cards.length < 12) {   //проверка на наличие картинок для след загрузки\r\n            hideLoadMoreBtn();\r\n        }\r\n    })\r\n};\r\n\r\nfunction appendImagesMarkUp(cards) {\r\n    refs.galleryContainer.insertAdjacentHTML('beforeend', cardTpl(cards));\r\n}\r\n\r\nfunction clearImagesGallery() {\r\n    refs.galleryContainer.innerHTML = '';\r\n}\r\n\r\nfunction onInfoMessage(text) {\r\n    refs.infoMessage.textContent = text;\r\n}\r\n\r\nfunction onScrollToScreen(position) {\r\n    window.scrollTo({ top: position, behavior:\"smooth\"})\r\n}\r\n\r\nfunction hideLoadMoreBtn() {\r\n refs.loadMoreBtn.classList.add('is-hidden');   \r\n}    \r\n\r\nfunction visibleLoadMoreBtn() {\r\nrefs.loadMoreBtn.classList.remove('is-hidden');\r\n} \r\n"],"sourceRoot":""}